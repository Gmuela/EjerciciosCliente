<html>
<head>
    
    <link rel="stylesheet" type="text/css" href="ejercicio_41.css"/>
    
    <script src="persona.js"></script>
    <script src="utilJS.js"></script>
    
    <script>
        
        var arrayPersonas=new Array();
        
        var numero=0;
        
        function aniadir(){
            
            var comprueba=comprobarDatos();
            
            var nombre=document.getElementById("nombre").value;
            var apellido1=document.getElementById("apellido1").value;
            var apellido2=document.getElementById("apellido2").value;
            var dia=document.getElementById("dia").value;
            var mes=document.getElementById("mes").value;
            var anio=document.getElementById("anio").value;
            var curso=document.getElementById("curso").value;
            
            if(comprueba){
                
                if(apellido2==""){
                
                 apellido2="//";
                
            }
                
            var fecha=new Date(anio,mes,dia);
            
            arrayPersonas[matricula-1]=new Persona(matricula,curso,nombre,apellido1,apellido2,fecha);
            
            matricula++;
            
            document.getElementById("matricula").value=matricula;  
                
            document.getElementById("mensaje").innerHTML="<h3>Alumno añadido correctamente</h3>";
                
            limpiarFormulario();
                
            }               
        }
        
        function borrar(){
            
            var comprueba=comprobarDatos();
            
            if(comprueba){
                
                var alumno=document.getElementById("nombre");
                
                for(var i=0;i<arrayPersonas.length;i++){
                    
                    var nombre=arrayPersonas[i].getNombre();
                    
                    if(nombre==alumno){
                        
                        arrayPersonas.splice(i,1);
                        
                    }
                }
            }
        }
        
        function modificar(){
            
            alert("Modificar");
            
        }
        
        function listar(){
            
            if(arrayPersonas.length<1){
                
                document.getElementById("mensaje").innerHTML="No hay alumnos registrados";
                
            }
            
            else{

                var mostrar="<table border=\"1px\" class=\"tabla\"><tr><th>Matricula</th><th>Curso</th><th>Nombre</th><th>Apellidos</th><th>Fecha de Nacimiento</th></tr>";

                for(var i=0;i<arrayPersonas.length;i++){

                    var informacion=arrayPersonas[i].getInfo();
                    
                    mostrar+="<tr><td>"+informacion[0]+"</td><td>"+informacion[1]+"</td><td>"+informacion[2]+"</td><td>"+informacion[3]+" "+informacion[4]+"</td><td>"+informacion[5].toLocaleDateString()+"</td></tr>"

                    

                }

                mostrar+="</table>";
                
                miLista=window.open("","","width=550, height=450");              

                miLista.document.write(mostrar);
            }
        }
        
        function limpiar(){
            
            limpiarFormulario();
            
            document.getElementById("mensaje").innerHTML="";
            
        }
        
        function salir(){
            
            alert("Salir");
            
        }
        
        
function rellenar(){
    
    document.getElementById("curso").value=numero;
    document.getElementById("nombre").value=numero;
    document.getElementById("apellido1").value=numero;
    document.getElementById("apellido2").value=numero;
    document.getElementById("dia").value=12;
    document.getElementById("mes").value=10;
    document.getElementById("anio").value=1992;
    
    numero++;
    
}
    
    
    </script>
    
    
</head>
<body>
    <div class="contenido">
        <fieldset>
            <legend>Datos académicos</legend>
            
            Matrícula * <input type="text" class="matricula" id="matricula" readonly="readonly" maxlength="14"/><br/>
            Curso * <input type="text" id="curso" class="curso" maxlength="1" onkeyup="comprobarCurso()"/>
            <span class="oculto" id="oculto">Cursos posibles: 1, 2, 3 y 4</span>
        </fieldset>
        
        <fieldset>
            
            <legend>Datos Personales</legend>

            Nombre * <input type="text" id="nombre" class="nombre" maxlength="40"/><br/>
            Primer Apellido * <input type="text" id="apellido1" maxlength="40"/><br/>
            Segundo Apellido <input type="text" id="apellido2" maxlength="40"/><br/>

            <div id="fecha">            
                Fecha de nacimiento *<br/>

                Día <input type="text" id="dia" maxlength="2" onkeyup="calcularEdad()"/>
                Mes <input type="text" id="mes" maxlength="2" onkeyup="calcularEdad()"/>
                Año <input type="text" id="anio" class="anio" maxlength="4" onkeyup="calcularEdad()"/><br>

            </div>
            
            Edad <input type="text" id="edad" readonly="readonly"/><br/>
            
        </div>
        
        </fieldset>

        <div class="botones">
            <input type="button" id="" value="Añadir" onclick="aniadir()"/>
            <input type="button" id="" value="Borrar" onclick="borrar()"/>
            <input type="button" id="" value="Modificar" onclick="modificar()"/>
            <input type="button" id="" value="Listar" onclick="listar()"/>
            <input type="button" id="" value="Limpiar" onclick="limpiar()"/>
            <input type="button" id="" value="Salir" onclick="salir()"/>
            <input type="button" id="" value="Rellenar" onclick="rellenar()"/>
        </div>
    </div>
    <div id="mensaje"></div>
</body>

<script type="text/javascript">
    
    var matricula=1;
    
    document.getElementById("matricula").value=matricula;
        
</script>

</html>

